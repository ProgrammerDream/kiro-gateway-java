import{a as E}from"./index-D7fQwz9Q.js";import{_ as A,l as B,h as O,y as h,o as c,c as d,a as p,b as t,w as _,F,z as I,i as U,n as b,g as s,r as v,q as z,f as w,t as N,A as T}from"./index-DX4KFW2y.js";const D={class:"page-header",style:{display:"flex","justify-content":"space-between","align-items":"center"}},G={style:{display:"flex",gap:"8px","align-items":"center"}},W={key:0,style:{color:"#909399","text-align":"center",padding:"40px"}},S={__name:"AppLogsView",setup($){const g=s([]),r=s(""),i=s(""),o=s(!0),u=s(null);let m=null;const y=z(()=>{let e=g.value;if(r.value&&(e=e.filter(l=>l.includes(`[${r.value}]`))),i.value){const l=i.value.toLowerCase();e=e.filter(n=>n.toLowerCase().includes(l))}return e});function V(e){return e.includes("[ERROR]")?"ERROR":e.includes("[WARN]")?"WARN":e.includes("[INFO]")?"INFO":e.includes("[DEBUG]")?"DEBUG":""}async function f(){try{const e=await E.getAppLogs(200);g.value=e.lines||[],o.value&&b(()=>R())}catch(e){console.error("加载日志失败",e)}}function R(){u.value&&(u.value.scrollTop=u.value.scrollHeight)}return B(o,e=>{e&&b(()=>R())}),O(()=>{f(),m=setInterval(f,3e3)}),h(()=>{m&&clearInterval(m)}),(e,l)=>{const n=v("el-option"),C=v("el-select"),L=v("el-input"),x=v("el-button");return c(),d("div",null,[p("div",D,[l[4]||(l[4]=p("h1",null,"应用日志",-1)),p("div",G,[t(C,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=a=>r.value=a),placeholder:"级别筛选",clearable:"",style:{width:"120px"},size:"small"},{default:_(()=>[t(n,{label:"INFO",value:"INFO"}),t(n,{label:"WARN",value:"WARN"}),t(n,{label:"ERROR",value:"ERROR"}),t(n,{label:"DEBUG",value:"DEBUG"})]),_:1},8,["modelValue"]),t(L,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=a=>i.value=a),placeholder:"搜索关键字",clearable:"",style:{width:"200px"},size:"small"},null,8,["modelValue"]),t(x,{type:o.value?"primary":"",size:"small",onClick:l[2]||(l[2]=a=>o.value=!o.value)},{default:_(()=>[w(N(o.value?"暂停":"尾随"),1)]),_:1},8,["type"]),t(x,{size:"small",onClick:f},{default:_(()=>[...l[3]||(l[3]=[w("刷新",-1)])]),_:1})])]),p("div",{class:"content-card log-container",ref_key:"logContainer",ref:u},[(c(!0),d(F,null,I(y.value,(a,k)=>(c(),d("div",{key:k,class:T(["log-line",V(a)])},N(a),3))),128)),y.value.length===0?(c(),d("div",W," 暂无日志 ")):U("",!0)],512)])}}},H=A(S,[["__scopeId","data-v-ab8edcbc"]]);export{H as default};
