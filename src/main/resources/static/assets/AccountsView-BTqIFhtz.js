import{a as _}from"./index-CF_AK63A.js";import{h as B,o as T,c as E,a as v,b as e,w as a,g as b,r as o,f as u,t as w,i as N,E as y}from"./index--31tCAGN.js";const z={class:"page-header",style:{display:"flex","justify-content":"space-between","align-items":"center"}},S={class:"content-card"},j={__name:"AccountsView",setup($){const h=b([]),i=b(!1),n=b({name:"",authMethod:"social",credentials:""});async function p(){try{h.value=await _.getAccounts()}catch(d){console.error(d)}}async function g(){try{await _.addAccount(n.value),y.success("添加成功"),i.value=!1,n.value={name:"",authMethod:"social",credentials:""},await p()}catch{y.error("添加失败")}}async function C(d){try{await N.confirm("确定删除该账号？","确认"),await _.deleteAccount(d),y.success("删除成功"),await p()}catch{}}function x(d){return d?new Date(d).toLocaleString("zh-CN"):"-"}return B(p),(d,t)=>{const r=o("el-button"),s=o("el-table-column"),A=o("el-tag"),k=o("el-table"),V=o("el-input"),c=o("el-form-item"),m=o("el-option"),M=o("el-select"),D=o("el-form"),U=o("el-dialog");return T(),E("div",null,[v("div",z,[t[7]||(t[7]=v("h1",null,"账号管理",-1)),e(r,{type:"primary",onClick:t[0]||(t[0]=l=>i.value=!0)},{default:a(()=>[...t[6]||(t[6]=[u("添加账号",-1)])]),_:1})]),v("div",S,[e(k,{data:h.value,stripe:"",style:{width:"100%"}},{default:a(()=>[e(s,{prop:"name",label:"名称",width:"150"}),e(s,{prop:"authMethod",label:"认证方式",width:"100"}),e(s,{prop:"status",label:"状态",width:"100"},{default:a(({row:l})=>[e(A,{type:l.status==="active"?"success":"danger",size:"small"},{default:a(()=>[u(w(l.status),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"requestCount",label:"请求数",width:"80"}),e(s,{prop:"successCount",label:"成功",width:"80"}),e(s,{prop:"errorCount",label:"错误",width:"80"}),e(s,{prop:"creditsTotal",label:"Credits",width:"100"},{default:a(({row:l})=>{var f;return[u(w((f=l.creditsTotal)==null?void 0:f.toFixed(4)),1)]}),_:1}),e(s,{prop:"lastUsedAt",label:"最后使用",width:"180"},{default:a(({row:l})=>[u(w(x(l.lastUsedAt)),1)]),_:1}),e(s,{label:"操作",width:"100"},{default:a(({row:l})=>[e(r,{type:"danger",size:"small",text:"",onClick:f=>C(l.id)},{default:a(()=>[...t[8]||(t[8]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),e(U,{modelValue:i.value,"onUpdate:modelValue":t[5]||(t[5]=l=>i.value=l),title:"添加账号",width:"500px"},{footer:a(()=>[e(r,{onClick:t[4]||(t[4]=l=>i.value=!1)},{default:a(()=>[...t[9]||(t[9]=[u("取消",-1)])]),_:1}),e(r,{type:"primary",onClick:g},{default:a(()=>[...t[10]||(t[10]=[u("确定",-1)])]),_:1})]),default:a(()=>[e(D,{model:n.value,"label-width":"80px"},{default:a(()=>[e(c,{label:"名称"},{default:a(()=>[e(V,{modelValue:n.value.name,"onUpdate:modelValue":t[1]||(t[1]=l=>n.value.name=l),placeholder:"账号名称"},null,8,["modelValue"])]),_:1}),e(c,{label:"认证方式"},{default:a(()=>[e(M,{modelValue:n.value.authMethod,"onUpdate:modelValue":t[2]||(t[2]=l=>n.value.authMethod=l)},{default:a(()=>[e(m,{label:"Social",value:"social"}),e(m,{label:"IDC",value:"idc"}),e(m,{label:"Builder ID",value:"builderid"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"凭证"},{default:a(()=>[e(V,{modelValue:n.value.credentials,"onUpdate:modelValue":t[3]||(t[3]=l=>n.value.credentials=l),type:"textarea",rows:6,placeholder:'{"refreshToken":"..."}'},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{j as default};
