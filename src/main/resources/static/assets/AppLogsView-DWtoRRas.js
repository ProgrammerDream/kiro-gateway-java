import{a as E}from"./index-CF_AK63A.js";import{_ as A,k as B,h as O,y as h,o as c,c as d,a as p,b as t,w as _,F,z as I,v as U,n as w,g as s,r as v,p as z,f as N,t as V,A as T}from"./index--31tCAGN.js";const D={class:"page-header",style:{display:"flex","justify-content":"space-between","align-items":"center"}},G={style:{display:"flex",gap:"8px","align-items":"center"}},W={key:0,style:{color:"#909399","text-align":"center",padding:"40px"}},S={__name:"AppLogsView",setup($){const g=s([]),r=s(""),i=s(""),o=s(!0),u=s(null);let f=null;const y=z(()=>{let e=g.value;if(r.value&&(e=e.filter(l=>l.includes(`[${r.value}]`))),i.value){const l=i.value.toLowerCase();e=e.filter(n=>n.toLowerCase().includes(l))}return e});function b(e){return e.includes("[ERROR]")?"ERROR":e.includes("[WARN]")?"WARN":e.includes("[INFO]")?"INFO":e.includes("[DEBUG]")?"DEBUG":""}async function m(){try{const e=await E.getAppLogs(200);g.value=e.lines||[],o.value&&w(()=>R())}catch(e){console.error("加载日志失败",e)}}function R(){u.value&&(u.value.scrollTop=u.value.scrollHeight)}return B(o,e=>{e&&w(()=>R())}),O(()=>{m(),f=setInterval(m,3e3)}),h(()=>{f&&clearInterval(f)}),(e,l)=>{const n=v("el-option"),k=v("el-select"),C=v("el-input"),x=v("el-button");return c(),d("div",null,[p("div",D,[l[4]||(l[4]=p("h1",null,"应用日志",-1)),p("div",G,[t(k,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=a=>r.value=a),placeholder:"级别筛选",clearable:"",style:{width:"120px"},size:"small"},{default:_(()=>[t(n,{label:"INFO",value:"INFO"}),t(n,{label:"WARN",value:"WARN"}),t(n,{label:"ERROR",value:"ERROR"}),t(n,{label:"DEBUG",value:"DEBUG"})]),_:1},8,["modelValue"]),t(C,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=a=>i.value=a),placeholder:"搜索关键字",clearable:"",style:{width:"200px"},size:"small"},null,8,["modelValue"]),t(x,{type:o.value?"primary":"",size:"small",onClick:l[2]||(l[2]=a=>o.value=!o.value)},{default:_(()=>[N(V(o.value?"暂停":"尾随"),1)]),_:1},8,["type"]),t(x,{size:"small",onClick:m},{default:_(()=>[...l[3]||(l[3]=[N("刷新",-1)])]),_:1})])]),p("div",{class:"content-card log-container",ref_key:"logContainer",ref:u},[(c(!0),d(F,null,I(y.value,(a,L)=>(c(),d("div",{key:L,class:T(["log-line",b(a)])},V(a),3))),128)),y.value.length===0?(c(),d("div",W," 暂无日志 ")):U("",!0)],512)])}}},M=A(S,[["__scopeId","data-v-8adef90f"]]);export{M as default};
